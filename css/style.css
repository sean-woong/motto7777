:root {
  --color-bg: #000;
  --color-fg: #fff;
  --color-muted: #9aa0a6;
  --color-primary: #ff00aa;
  --color-secondary: #00bfff;
  --color-accent: #00ff66;
  --color-imm-title: #6bd1ff;
  --color-line: #2a2a2a;
  --ease-standard: cubic-bezier(0.4, 0, 0.2, 1);
  --dur-short: 120ms;
  --dur-medium: 240ms;
  --dur-long: 480ms;
  --cursor-x: 50vw;
  --cursor-y: 50vh;
}
.hidden { display: none !important; }
.active { display: block !important; }
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  background: var(--color-bg);
  color: var(--color-fg);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  overflow-x: hidden;
  --cursor-brightness: 1;
  --cursor-color: #81f6ff;
  --cursor-glow: rgba(129, 246, 255, 0.9);
  --cursor-outer-glow: 12px;
  --cursor-speed: 0;
}

.site-shell {
  min-height: 100%;
  filter: contrast(1.15) brightness(1.08);
}

body.has-custom-cursor,
body.has-custom-cursor * {
  cursor: none !important;
}

body.has-custom-cursor input,
body.has-custom-cursor textarea,
body.has-custom-cursor select,
body.has-custom-cursor [contenteditable],
body.has-custom-cursor .allow-native-cursor {
  cursor: auto !important;
}

#mottoCursor,
.motto-cursor {
  position: fixed;
  top: 0;
  left: 0;
  width: 16px;
  height: 16px;
  pointer-events: none;
  mix-blend-mode: difference;
  transform: translate3d(var(--cursor-x, 0px), var(--cursor-y, 0px), 0) translate(-50%, -50%);
  filter: brightness(var(--cursor-brightness)) blur(1.5px);
  color: var(--cursor-color);
  background:
    linear-gradient(#000 0 0) center / 2px 100% no-repeat,
    linear-gradient(#000 0 0) center / 100% 2px no-repeat;
  background-color: currentColor;
  box-shadow:
    inset 0 0 8px #81f6ff,
    0 0 var(--cursor-outer-glow) var(--cursor-glow);
  transition:
    filter 0.15s ease-out,
    transform 0.15s ease-out,
    box-shadow 0.15s ease-out;
  will-change: transform, filter, box-shadow;
  contain: layout paint style;
  z-index: 9999;
  opacity: 0;
}

#mottoCursor::after,
.motto-cursor::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  mix-blend-mode: difference;
  transform: scale(calc(1.2 + var(--cursor-speed) * 0.3));
  opacity: 0;
  background: radial-gradient(circle, rgba(255, 0, 76, 0.45) 0%, rgba(255, 0, 76, 0) 65%);
  transition: opacity 0.15s ease-out, transform 0.15s ease-out;
  will-change: opacity, transform;
  z-index: -1;
}

body.has-custom-cursor #mottoCursor {
  opacity: 1;
}

body.cursor-moving #mottoCursor::after {
  opacity: clamp(0, calc(var(--cursor-speed) * 0.6), 0.5);
}

body.cursor-target {
  --cursor-brightness: 1.65;
  --cursor-outer-glow: 8px;
}

/* Intro */
.intro {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 50;
  background: #000;
  transition: opacity var(--dur-long) var(--ease-standard), transform var(--dur-long) var(--ease-standard);
}
.intro--exit {
  opacity: 0;
  transform: translateY(-4vh) scale(.96);
  pointer-events: none;
}
.intro-inner {
  text-align: center;
}
.intro-logo {
  width: min(42vw, 340px);
  height: auto;
  display: block;
  margin: 0 auto 14px;
}
.btn { appearance: none; border: 1px solid var(--color-fg); background: transparent; color: var(--color-fg);
  padding: 12px 22px; letter-spacing: .12em; cursor: pointer; transition: var(--dur-short) var(--ease-standard); }
#enterBtn {
  font-family: 'Helvetica Neue', Arial, sans-serif;
  color: var(--color-fg);
  border-color: rgba(255, 0, 170, .65);
  text-shadow: 0 0 8px rgba(255, 0, 170, .6);
  box-shadow: 0 0 14px rgba(255, 0, 170, .35), inset 0 0 6px rgba(255, 0, 170, .25);
}
#enterBtn:hover {
  color: var(--color-secondary);
  border-color: var(--color-primary);
  box-shadow: 0 0 18px rgba(255, 0, 170, .6), inset 0 0 10px rgba(255, 0, 170, .45);
  animation: enterPulse 1.8s var(--ease-standard) infinite;
}
#enterBtn:focus-visible {
  outline: 2px solid var(--color-secondary);
  outline-offset: 3px;
}
.btn:hover:not(#enterBtn) { transform: scale(1.03); }

@keyframes enterPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.08); }
}
.hint { color: var(--color-muted); font-size: 12px; margin-top: 10px; }

/* Intro clip */
.intro-clip {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, var(--overlay-alpha, 0.85));
  display: grid;
  place-items: center;
  z-index: 45;
  padding: clamp(18px, 8vw, 56px);
  opacity: 0;
  transform: scale(.97);
  transition: opacity var(--dur-medium) var(--ease-standard),
              transform var(--dur-medium) var(--ease-standard);
  pointer-events: none;
}
.intro-clip--active {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;
}
.intro-clip img {
  width: clamp(200px, 40vw, 460px);
  height: auto;
  max-height: min(70vh, 540px);
  object-fit: contain;
  filter: contrast(1.08) saturate(1.12) drop-shadow(0 20px 40px rgba(0,0,0,.45));
  opacity: 0;
  transform: scale(.9);
  transition: opacity var(--dur-medium) var(--ease-standard),
              transform var(--dur-medium) var(--ease-standard);
}
.intro-clip--active img {
  opacity: 1;
  transform: scale(1);
}

/* Glitch Links */
.link-glitch {
  position: relative;
  display: inline-block;
  font-size: 12px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--color-secondary);
  text-decoration: none;
  transition: color var(--dur-short) var(--ease-standard), text-shadow var(--dur-short) var(--ease-standard);
  filter: drop-shadow(0 0 6px rgba(0, 191, 255, .35));
}
.link-glitch:focus-visible {
  outline: 2px solid rgba(255, 0, 170, .55);
  outline-offset: 4px;
}
.link-glitch::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: -6px;
  width: 100%;
  height: 2px;
  background: linear-gradient(90deg, rgba(255,0,170,.75), rgba(0,191,255,.75));
  transform-origin: left center;
  transform: scaleX(0);
  opacity: 0;
}
.link-glitch:hover,
.link-glitch:focus {
  color: var(--color-primary);
  text-shadow: 0 0 8px rgba(255, 0, 170, .45);
}
.link-glitch:hover::after,
.link-glitch:focus::after {
  opacity: 1;
  animation: glitchLine var(--dur-medium) steps(2, end);
}

/* Header */
.nav {
  position: fixed;
  top: clamp(18px, 4vw, 38px);
  left: clamp(18px, 5vw, 40px);
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: clamp(16px, 3vw, 28px);
  z-index: 40;
}
.brand {
  display: flex;
  flex-direction: column;
  gap: 6px;
  pointer-events: auto;
  text-decoration: none;
  position: relative;
  overflow: visible;
}
.brand-word {
  position: relative;
  font-family: 'Anton', 'Archivo Black', 'Impact', sans-serif;
  font-size: clamp(38px, 6.4vw, 78px);
  font-style: italic;
  font-weight: 900;
  letter-spacing: .02em;
  text-transform: lowercase;
  color: transparent;
  -webkit-text-stroke: 2px rgba(0,191,255,.55);
  opacity: .82;
  transform: skewX(-8deg) scaleX(.96);
  transition: transform var(--dur-short) var(--ease-standard),
              -webkit-text-stroke var(--dur-short) var(--ease-standard),
              opacity var(--dur-short) var(--ease-standard);
}
.brand-word::before,
.brand-word::after {
  content: attr(data-text);
  position: absolute;
  inset: 0;
  color: transparent;
  -webkit-text-stroke: 2px rgba(0,191,255,.35);
  opacity: 0;
  pointer-events: none;
}
.brand-word::before {
  mix-blend-mode: screen;
  filter: hue-rotate(22deg);
}
.brand-word::after {
  mix-blend-mode: screen;
  filter: hue-rotate(-32deg);
}
.brand-word::after {
  content: attr(data-text);
  position: absolute;
  inset: 0;
  color: rgba(0,191,255,.08);
  filter: blur(14px);
  transform: scale(1.04);
  z-index: -1;
}
.brand-tag {
  font-family: 'Noto Sans JP', 'Hiragino Kaku Gothic Pro', 'Yu Gothic', 'Meiryo', sans-serif;
  font-weight: 700;
  font-style: italic;
  font-size: clamp(14px, 2.4vw, 26px);
  letter-spacing: .32em;
  color: #74f8ff;
  text-transform: none;
  padding-left: 4px;
  position: relative;
  line-height: 1;
  display: inline-block;
  transform: skewX(-10deg) translateY(2px);
  -webkit-text-stroke: 1.2px rgba(0, 40, 80, .75);
  text-shadow:
    0 0 6px rgba(0, 200, 255, .6),
    0 0 14px rgba(0, 180, 255, .55),
    0 0 30px rgba(0, 60, 120, .45);
  filter: drop-shadow(0 6px 14px rgba(0, 120, 240, .35));
}
.brand-tag::after {
  content: '';
  position: absolute;
  left: 4px;
  bottom: -4px;
  width: clamp(76px, 16vw, 230px);
  height: 3px;
  background: linear-gradient(90deg, rgba(0,240,255,.85), rgba(0,110,255,.4));
  border-radius: 999px;
  transition: transform var(--dur-short) var(--ease-standard), opacity var(--dur-short) var(--ease-standard), filter var(--dur-short) var(--ease-standard);
  transform-origin: left center;
}
.brand:hover .brand-word {
  transform: skewX(-1deg) translateX(22px) translateY(-10px) scale(1.12) rotate(-1deg);
  -webkit-text-stroke: 4px rgba(255,0,170,.95);
  opacity: 1;
  filter: drop-shadow(0 20px 36px rgba(255,0,170,.72));
}
.brand:hover .brand-word::before {
  opacity: 1;
  animation: brandGlitchA 0.18s steps(2, end) infinite;
}
.brand:hover .brand-word::after {
  opacity: .8;
  animation: brandGlitchB 0.16s steps(3, end) infinite;
}
.brand::before {
  content: '';
  position: absolute;
  inset: -60px;
  background: radial-gradient(circle at center, rgba(0,191,255,.08) 0%, rgba(255,0,170,.08) 35%, rgba(0,0,0,0) 70%);
  z-index: -2;
  opacity: 0;
  transition: opacity var(--dur-short) var(--ease-standard), transform var(--dur-short) var(--ease-standard);
}
.brand:hover::before {
  opacity: .85;
  transform: scale(1.05);
}
.brand::after {
  content: '';
  position: absolute;
  left: -160px;
  top: 55%;
  width: 360px;
  height: 2px;
  background: linear-gradient(90deg, rgba(255,0,170,.55), rgba(0,191,255,.0));
  transform: translateY(-50%) scaleX(0.25);
  opacity: 0;
  transition: transform var(--dur-short) var(--ease-standard), opacity var(--dur-short) var(--ease-standard);
}
.brand:hover::after {
  transform: translateY(-50%) scaleX(1.8) skewX(-6deg);
  opacity: .9;
}
.brand:hover .brand-tag {
  color: #aefeff;
  text-shadow:
    0 0 10px rgba(0, 255, 255, .9),
    0 0 24px rgba(0, 180, 255, .7),
    0 0 46px rgba(0, 90, 160, .65);
  filter: drop-shadow(0 10px 20px rgba(0, 200, 255, .55));
}
.brand:hover .brand-tag::after {
  transform: scaleX(2.4) translateX(12px) skewX(-4deg);
  opacity: 1;
  filter: drop-shadow(0 8px 18px rgba(0, 200, 255, .65));
}
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
.links {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: clamp(10px, 2vw, 18px);
  max-width: clamp(160px, 18vw, 240px);
}
.links .link-glitch { display: block; }
.nav-link.disabled {
  opacity: .4;
  pointer-events: none;
}
.nav-eggs {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: clamp(12px, 3vw, 24px);
}
.nav-eggs .egg {
  font-size: 11px;
}

/* Stage */
.stage {
  position: relative;
  min-height: 100vh;
  width: 100%;
  padding: clamp(70px, 8vw, 110px) clamp(20px, 6vw, 48px) clamp(140px, 12vw, 180px) clamp(260px, 24vw, 320px);
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: clamp(30px, 4vw, 44px);
  justify-items: center;
  align-content: start;
  max-width: min(1180px, 94vw);
  margin: 0 auto;
  overflow: visible;
  z-index: 10;
}
.stage--hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(24px, 4vw, 44px);
  padding: clamp(80px, 9vw, 140px) clamp(32px, 8vw, 72px);
  max-width: min(960px, 92vw);
  margin: 0 auto;
}
.today-section {
  grid-column: 1 / -1;
  width: 100%;
  max-width: clamp(280px, 62vw, 620px);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(20px, 4vw, 32px);
}
.today-hero-card {
  width: clamp(280px, 62vw, 620px);
  aspect-ratio: 1 / 1;
  opacity: 0;
  transform: scale(.96);
  transition: transform var(--dur-medium) var(--ease-standard), box-shadow var(--dur-medium) var(--ease-standard);
}
.today-hero-card.today-hero-animate {
  animation: todayHeroReveal 0.72s var(--ease-standard) forwards;
}
.today-hero-media {
  position: absolute;
  inset: 0;
  overflow: hidden;
}
.today-hero-card img,
.today-hero-card video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: saturate(1.05);
  display: block;
}
.today-hero-card img,
.today-hero-card video { background: #000; }
.today-hero-card .imm-info {
  padding: clamp(12px, 3vw, 18px) clamp(14px, 3.5vw, 22px);
  gap: 6px;
}
.today-hero-card .imm-info strong {
  font-size: clamp(16px, 3vw, 24px);
}
.today-hero-card .imm-info span {
  font-size: clamp(11px, 2.6vw, 14px);
  letter-spacing: .12em;
}
.today-footer {
  display: flex;
  justify-content: flex-end;
  width: 100%;
  max-width: clamp(280px, 62vw, 620px);
  margin-top: clamp(4px, 2vw, 18px);
}
.today-nav-link {
  position: relative;
  font-size: 11px;
  letter-spacing: .16em;
  text-transform: uppercase;
  color: var(--color-secondary);
  text-decoration: none;
  padding-bottom: 2px;
}
.today-nav-link::after {
  content: '';
  position: absolute;
  left: 0;
  bottom: 0;
  width: 100%;
  height: 1px;
  background: linear-gradient(90deg, rgba(0, 191, 255, .8), rgba(255, 0, 170, .6));
  transform-origin: right;
  transform: scaleX(0);
  transition: transform var(--dur-short) var(--ease-standard);
}
.today-nav-link:hover,
.today-nav-link:focus-visible {
  color: var(--color-primary);
  outline: none;
  box-shadow: 0 0 0 2px rgba(255, 0, 170, .25);
  border-radius: 2px;
}
.today-nav-link:hover::after,
.today-nav-link:focus-visible::after {
  transform-origin: left;
  transform: scaleX(1);
}
.today-loading,
.today-empty,
.today-error {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--color-muted);
  letter-spacing: .12em;
  text-transform: uppercase;
  padding: 28px 12px;
}
.today-loading {
  animation: todayPulse 1.6s ease-in-out infinite;
}
@keyframes todayPulse {
  0%, 100% { opacity: .6; }
  50% { opacity: 1; }
}
@keyframes todayHeroReveal {
  0% {
    opacity: 0;
    transform: scale(.94);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}
@media (max-width: 900px) {
  .stage {
    padding: clamp(62px, 11vw, 100px) clamp(14px, 7vw, 32px) clamp(120px, 16vw, 180px) clamp(200px, 32vw, 280px);
    gap: clamp(26px, 6vw, 36px);
    max-width: min(960px, 94vw);
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .today-footer {
    justify-content: center;
    max-width: 100%;
  }
  .today-hero-card {
    width: 100%;
    max-width: 100%;
  }
  .today-hero-card .imm-info {
    padding: 16px;
  }
  .intro-logo {
    width: min(48vw, 320px);
  }
}
@media (max-width: 640px) {
  .stage--hero {
    padding: clamp(70px, 16vw, 120px) clamp(18px, 8vw, 32px);
    max-width: 100%;
  }
  .today-footer {
    justify-content: flex-end;
  }
  .today-nav-link {
    font-size: 10px;
  }
}

/* Portal / Legend pin */
.portal {
  position: relative;
  display: block;
  width: 100%;
  max-width: min(520px, 100%);
  aspect-ratio: 4 / 3;
  background: #111 center/cover no-repeat;
  border: 1px solid #333;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 12px 32px rgba(0, 0, 0, .38);
  transition: transform var(--dur-medium) var(--ease-standard), box-shadow var(--dur-medium) var(--ease-standard), filter var(--dur-medium) var(--ease-standard);
  opacity: 0;
  transform: translate3d(0, 32px, 0) scale(.94);
  isolation: isolate;
}
.portal:hover, .portal:focus {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 22px 46px rgba(255, 0, 170, .36), 0 0 14px rgba(255, 0, 170, .42) inset;
  filter: saturate(1.14);
}
.portal:focus-visible {
  outline: 2px solid rgba(255, 0, 170, .6);
  outline-offset: 4px;
}
.portal::after {
  content: '';
  position: absolute;
  inset: -6%;
  background: linear-gradient(120deg, rgba(255, 0, 170, .4) 0%, rgba(0, 240, 255, .35) 45%, rgba(0, 0, 0, 0) 70%);
  opacity: 0;
  pointer-events: none;
  mix-blend-mode: screen;
  transform: translateX(-28%);
}
.portal .label {
  position: absolute; left: 12px; bottom: 12px; font-size: 13px; letter-spacing: .1em;
  background: rgba(0,0,0,.55); padding: 6px 8px; border: 1px solid var(--color-line);
  border-radius: 12px;
}
.portal.placeholder {
  background: repeating-linear-gradient(45deg, #0e0e0e 0 8px, #111 8px 16px);
  border: 1px dashed #2c2c2c;
}
.portal.legend {
  box-shadow: 0 0 18px rgba(255,0,170,.18), 0 0 2px rgba(255,0,170,.45) inset; border-color: rgba(255,0,170,.35);
}

.portal-enter {
  animation: portalEnter var(--dur-long) var(--ease-standard) forwards;
  animation-delay: var(--portal-delay, 0s);
}
.portal-enter::after {
  animation: portalSweep var(--dur-medium) var(--ease-standard) forwards;
  animation-delay: calc(var(--portal-delay, 0s) + var(--dur-short));
}

@keyframes portalEnter {
  0% {
    opacity: 0;
    transform: translate3d(0, 32px, 0) scale(.94);
    filter: blur(6px) saturate(.8);
  }
  60% {
    opacity: 1;
    transform: translate3d(0, -6px, 0) scale(1.02);
    filter: none;
  }
  100% {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes portalSweep {
  0% {
    opacity: 0.85;
    transform: translateX(-35%);
  }
  40% {
    opacity: 0.6;
  }
  100% {
    opacity: 0;
    transform: translateX(25%);
  }
}

@keyframes glitchLine {
  0% { transform: scaleX(0); filter: hue-rotate(0deg); }
  40% { transform: scaleX(1.1) translateX(2px); filter: hue-rotate(40deg); }
  60% { transform: scaleX(.8) translateX(-1px); filter: hue-rotate(-20deg); }
  100% { transform: scaleX(1); filter: hue-rotate(0deg); }
}

@keyframes brandGlitchA {
  0% { transform: translate(0,0); clip-path: inset(0 0 0 0); }
  25% { transform: translate(-6px,-3px); clip-path: polygon(0 0, 100% 10%, 100% 55%, 0 45%); }
  50% { transform: translate(8px,1px); clip-path: polygon(0 60%, 100% 50%, 100% 100%, 0 100%); }
  75% { transform: translate(-4px,2px); clip-path: polygon(0 0, 100% 0, 100% 42%, 0 60%); }
  100% { transform: translate(0,0); clip-path: inset(0 0 0 0); }
}

@keyframes brandGlitchB {
  0% { transform: translate(0,0); clip-path: inset(0 0 0 0); }
  20% { transform: translate(5px,-2px) scaleX(1.02); clip-path: polygon(0 30%, 100% 20%, 100% 90%, 0 80%); }
  40% { transform: translate(-7px,3px) scaleX(1.04); clip-path: polygon(0 0, 100% 0, 100% 40%, 0 30%); }
  60% { transform: translate(3px,-4px) scaleX(.96); clip-path: polygon(0 70%, 100% 60%, 100% 100%, 0 100%); }
  100% { transform: translate(0,0); clip-path: inset(0 0 0 0); }
}


/* Eggs */
.egg {
  display: block;
  position: relative;
}

/* Audio Hub */
.audio-ui {
  position: fixed;
  top: clamp(18px, 4vw, 32px);
  left: 50%;
  right: auto;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
  padding: 8px clamp(14px, 4vw, 22px);
  height: 40px;
  border-radius: 999px;
  background: rgba(14, 16, 24, .52);
  backdrop-filter: blur(18px) saturate(130%);
  width: clamp(320px, 58vw, 760px);
  margin: 0 auto;
  z-index: 36;
  line-height: 1;
}
.audio-ui.hidden { display: none !important; }
.audio-ui.pending {
  border-color: rgba(255,0,170,.55);
  box-shadow: 0 0 24px rgba(255,0,170,.32);
}
.audio-ui::before,
.audio-ui::after {
  content: none;
}
.player-left,
.player-center,
.player-right {
  display: flex;
  align-items: center;
}
.player-left {
  gap: 6px;
  min-width: 0;
  flex: 1 1 clamp(320px, 52vw, 560px);
  max-width: clamp(320px, 55vw, 560px);
  overflow: hidden;
  position: relative;
}
.player-left::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(90deg, rgba(18,20,28,1) 0%, rgba(18,20,28,0) 18%, rgba(18,20,28,0) 82%, rgba(18,20,28,1) 100%);
}
.audio-title {
  position: relative;
  display: inline-block;
  overflow: hidden;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: .24em;
  text-transform: uppercase;
  color: var(--color-secondary);
  line-height: 1;
  margin: 0;
  max-width: 100%;
  white-space: nowrap;
  text-overflow: clip;
  padding-bottom: 2px;
  transition: color var(--dur-short) var(--ease-standard), text-shadow var(--dur-short) var(--ease-standard);
}
.track-title {
  --marquee-start: 0px;
  --marquee-distance: 0px;
  --marquee-duration: 12s;
  flex: 1 1 auto;
  min-width: 0;
  width: 100%;
  display: block;
  overflow: hidden;
  position: relative;
}
.track-title__inner {
  display: inline-block;
  transform: translateX(0);
  animation: none;
  white-space: nowrap;
}
.track-title.marquee .track-title__inner {
  animation: trackMarquee var(--marquee-duration) linear infinite;
}
.track-title.marquee--paused .track-title__inner,
.track-title:hover .track-title__inner {
  animation-play-state: paused;
}
.audio-title:hover,
.audio-title:focus {
  color: var(--color-primary);
  text-shadow: 0 0 10px rgba(255,0,170,.4);
}
.audio-title.marquee { animation: none; }
.player-center {
  gap: 10px;
  justify-content: center;
  flex: 0 0 auto;
}
.player-center > .audio-btn {
  width: 30px;
  height: 30px;
}
.audio-btn {
  appearance: none;
  border: none;
  background: rgba(30,32,46,.55);
  color: #bbb;
  width: 30px;
  height: 30px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  font-size: 18px;
  cursor: pointer;
  transition: color var(--dur-short) var(--ease-standard), transform var(--dur-short) var(--ease-standard);
}
.audio-btn span { pointer-events: none; }
.audio-btn:hover,
.audio-btn:focus-visible {
  color: #fff;
  transform: translateY(-1px);
  text-shadow: 0 0 8px rgba(0,191,255,.45);
}
.audio-btn:focus-visible {
  outline: none;
}
.audio-btn--primary {
  width: 34px;
  height: 34px;
  font-size: 18px;
}
.audio-btn--mute {
  font-size: 14px;
  position: relative;
  --mute-icon: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20width%3D%2712%27%20height%3D%2712%27%20viewBox%3D%270%200%2012%2012%27%3E%3Cpath%20fill%3D%27black%27%20d%3D%27M5%202.4%203.1%204H1.2v4h1.9L5%209.6V2.4Zm3.25-.35-.7.73A3.3%203.3%200%200%201%209.3%205.96a3.3%203.3%200%200%201-1.75%203.18l.7.73A4.3%204.3%200%200%200%2010.3%205.96%204.3%204.3%200%200%200%208.25%202.05Zm-1.5%201.48-.7.7a1.6%201.6%200%200%201%20.02%202.32l.7.71a2.6%202.6%200%200%200-.02-3.73Z%27/%3E%3C/svg%3E");
}
.audio-btn--mute::before {
  content: '';
  width: 12px;
  height: 12px;
  display: block;
  background: currentColor;
  mask: var(--mute-icon) center/contain no-repeat;
  -webkit-mask: var(--mute-icon) center/contain no-repeat;
}
.audio-btn--mute span {
  position: absolute;
  width: 1px;
  height: 1px;
  margin: -1px;
  border: 0;
  padding: 0;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  overflow: hidden;
}
.audio-btn--mute.is-muted {
  color: #6b7288;
  --mute-icon: url("data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20width%3D%2712%27%20height%3D%2712%27%20viewBox%3D%270%200%2012%2012%27%3E%3Cpath%20fill%3D%27black%27%20d%3D%27M5%202.4%203.1%204H1.2v4h1.9L5%209.6V2.4Zm3.25-.35-.7.73A3.3%203.3%200%200%201%209.3%205.96a3.3%203.3%200%200%201-.92%202.27l.68.69%201.13-1.14.7.7-1.15%201.15.99%201L10.9%2012%200%201.1.7.4l3.4%203.4L8.25%202.05Zm-1.5%201.48-.7.7.79.8a1.6%201.6%200%200%201-.05%201.61l.7.71a2.6%202.6%200%200%200-.02-3.82ZM6.58%208.98l.71.7-.29.29.27.28-.7.7-7-7%20.7-.7L2.1%204.5%203.1%204H1.2v4h1.9l1.9%201.6V7.7l1.28%201.28.3-.3Z%27/%3E%3C/svg%3E");
}
.player-right {
  gap: clamp(8px, 1.4vw, 12px);
  justify-content: flex-end;
  flex: 0 1 clamp(150px, 26vw, 200px);
}
.audio-range {
  --vol: 90%;
  -webkit-appearance: none;
  appearance: none;
  width: clamp(140px, 34vw, 220px);
  height: 3px;
  border-radius: 999px;
  background:
    linear-gradient(90deg, #2B96E8, #81F6FF) 0 0 / var(--vol) 100% no-repeat,
    #1A2230;
  cursor: pointer;
  margin: 0;
  vertical-align: middle;
  position: relative;
  transition: box-shadow 0.2s ease, background-size 0.2s ease;
  touch-action: pan-y;
}
.audio-range:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(70, 200, 255, 0.32);
}
.audio-range::-webkit-slider-runnable-track {
  height: 3px;
  border-radius: 999px;
  background: transparent;
}
.audio-range::-moz-range-track {
  height: 3px;
  border-radius: 999px;
  background: #1A2230;
}
.audio-range::-moz-range-progress {
  height: 3px;
  border-radius: 999px;
  background: linear-gradient(90deg, #2B96E8, #81F6FF);
}
.audio-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #FF2CA0;
  border: none;
  box-shadow: 0 0 10px rgba(255, 44, 160, 0.65), 0 0 0 4px rgba(255, 44, 160, 0.22);
  margin-top: -5px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.audio-range:active::-webkit-slider-thumb {
  transform: scale(1.06);
  box-shadow: 0 0 14px rgba(255, 44, 160, 0.9), 0 0 0 5px rgba(255, 44, 160, 0.24);
}
.audio-range::-moz-range-thumb {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #FF2CA0;
  border: none;
  box-shadow: 0 0 10px rgba(255, 44, 160, 0.65), 0 0 0 4px rgba(255, 44, 160, 0.22);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.audio-range:active::-moz-range-thumb {
  transform: scale(1.06);
  box-shadow: 0 0 14px rgba(255, 44, 160, 0.9), 0 0 0 5px rgba(255, 44, 160, 0.24);
}
.audio-range::-ms-track {
  width: 100%;
  height: 3px;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.audio-range::-ms-fill-lower {
  background: linear-gradient(90deg, #2B96E8, #81F6FF);
  border-radius: 999px;
}
.audio-range::-ms-fill-upper {
  background: #1A2230;
  border-radius: 999px;
}
.audio-range::-ms-thumb {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #FF2CA0;
  border: none;
  box-shadow: 0 0 10px rgba(255, 44, 160, 0.65), 0 0 0 4px rgba(255, 44, 160, 0.22);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.audio-range:active::-ms-thumb {
  transform: scale(1.06);
  box-shadow: 0 0 14px rgba(255, 44, 160, 0.9), 0 0 0 5px rgba(255, 44, 160, 0.24);
}

@media (prefers-reduced-motion: reduce) {
  .audio-range,
  .audio-range::-webkit-slider-thumb,
  .audio-range::-moz-range-thumb,
  .audio-range::-ms-thumb {
    transition: none;
    box-shadow: 0 0 6px rgba(255, 44, 160, 0.4), 0 0 0 2px rgba(255, 44, 160, 0.12);
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .nav {
    position: sticky;
    top: 0;
    left: auto;
    right: auto;
    width: 100%;
    padding: clamp(14px, 5vw, 22px) clamp(16px, 6vw, 26px);
    gap: clamp(10px, 4vw, 18px);
    flex-direction: column;
    align-items: center;
    margin: 0;
    background: rgba(8, 10, 18, .86);
    backdrop-filter: blur(18px) saturate(120%);
    border-bottom: 1px solid rgba(255,255,255,.08);
    border-radius: 0 0 18px 18px;
    box-shadow: 0 10px 32px rgba(0,0,0,.35);
    z-index: 42;
  }
  .brand {
    align-items: center;
    text-align: center;
  }
  .brand-word {
    font-size: clamp(30px, 12vw, 48px);
  }
  .brand-tag {
    font-size: clamp(11px, 4vw, 17px);
    letter-spacing: .26em;
  }
  .brand::before,
  .brand::after {
    display: none;
  }
  .links {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    gap: clamp(10px, 3.6vw, 18px);
    width: 100%;
    max-width: none;
    overflow: visible;
    padding: 0;
  }
  .links::-webkit-scrollbar { display: none; }
  .links { scrollbar-width: none; }
  .links .nav-link {
    font-size: 11px;
  }
  .link-glitch {
    letter-spacing: .08em;
  }
  .nav-eggs {
    display: contents;
  }
  .egg {
    position: fixed;
    bottom: clamp(16px, 6vw, 24px);
    font-size: 11px;
    z-index: 35;
  }
  #egg1 { left: clamp(14px, 6vw, 24px); }
  #egg2 { right: clamp(14px, 6vw, 24px); }
  .stage {
    padding: clamp(90px, 24vw, 140px) clamp(16px, 7vw, 28px) clamp(160px, 32vw, 220px);
  }
  .audio-ui {
    right: clamp(12px, 6vw, 24px);
    width: min(88vw, 440px);
    padding: clamp(10px, 4vw, 14px) clamp(16px, 6vw, 22px);
    gap: clamp(12px, 4vw, 18px);
  }
  .player-left {
    flex: 1 1 clamp(200px, 48vw, 320px);
    max-width: clamp(200px, 52vw, 340px);
  }
  .audio-title {
    font-size: 10px;
    letter-spacing: .22em;
  }
  .player-center > .audio-btn {
    width: clamp(30px, 12vw, 42px);
    height: clamp(30px, 12vw, 42px);
  }
  .audio-btn--primary {
    width: clamp(34px, 14vw, 46px);
    height: clamp(34px, 14vw, 46px);
  }
  .player-right {
    flex: 0 1 clamp(150px, 42vw, 220px);
    gap: clamp(10px, 3vw, 16px);
  }
  .audio-range {
    width: clamp(150px, 60vw, 280px);
  }
}

@media (max-width: 640px) {
  .stage {
    grid-template-columns: 1fr;
    max-width: min(520px, 94vw);
    gap: clamp(22px, 7vw, 32px);
    padding: clamp(120px, 30vw, 180px) clamp(16px, 8vw, 26px) clamp(170px, 36vw, 240px);
  }
  .intro-logo {
    width: min(62vw, 220px);
    margin-bottom: 12px;
  }
  .intro-clip {
    padding: clamp(16px, 12vw, 28px);
  }
  .intro-clip img {
    width: min(82vw, 320px);
    max-height: 70vh;
  }
  .audio-ui {
    top: auto;
    bottom: clamp(16px, 6vw, 28px);
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    width: calc(100% - clamp(34px, 15vw, 90px));
    max-width: none;
    padding: clamp(12px, 6vw, 16px) clamp(16px, 8vw, 22px);
    gap: clamp(14px, 6vw, 22px);
    border-radius: 24px;
  }
  .player-left {
    display: none;
  }
  .player-center {
    flex: 1 1 auto;
    gap: clamp(16px, 8vw, 26px);
  }
  .player-center > .audio-btn {
    width: clamp(44px, 22vw, 62px);
    height: clamp(44px, 22vw, 62px);
  }
  .audio-btn--primary {
    width: clamp(50px, 26vw, 72px);
    height: clamp(50px, 26vw, 72px);
  }
  .player-right {
    flex: 0 0 auto;
    gap: clamp(12px, 6vw, 22px);
  }
  .audio-range {
    width: clamp(150px, 60vw, 260px);
  }
  .hint {
    font-size: 11px;
  }
}

@media (max-width: 480px) {
  .brand-word {
    font-size: clamp(26px, 20vw, 38px);
  }
  .brand-tag {
    font-size: clamp(11px, 5vw, 16px);
    letter-spacing: .26em;
  }
  .stage {
    padding-top: clamp(110px, 34vw, 160px);
  }
  .audio-ui {
    width: calc(100% - clamp(24px, 12vw, 60px));
  }
}

@keyframes marqueeScroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-100%); }
}

@keyframes trackMarquee {
  0% {
    transform: translateX(var(--marquee-start));
  }
  100% {
    transform: translateX(calc(-1 * var(--marquee-distance)));
  }
}

/* Modal base */
.modal[hidden] { display: none; }
.modal .modal-bg {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.7);
  backdrop-filter: blur(4px);
  opacity: 0;
  transition: opacity var(--dur-medium) var(--ease-standard);
}
.modal .modal-card {
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -48%);
  background: rgba(10, 10, 10, .92);
  border: 1px solid rgba(255, 255, 255, .06);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 30px 80px rgba(0, 0, 0, .65), 0 0 0 1px rgba(255,255,255,.05);
  opacity: 0;
  transition: transform var(--dur-medium) var(--ease-standard), opacity var(--dur-medium) var(--ease-standard);
}
.modal .modal-card::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  opacity: .18;
  mix-blend-mode: screen;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAM0lEQVQoU2NkYGBg+M+ABYxgFGBkYPB/CEwCkxqGhkEEmzAqGBkY/h/QxCFRA7E0JgABBgB+XhFHMZtJYwAAAABJRU5ErkJggg==');
}
.modal {
  transition: opacity var(--dur-medium) var(--ease-standard);
  opacity: 0;
  pointer-events: none;
}
.modal:not([hidden]) {
  opacity: 1;
  pointer-events: auto;
}
.modal:not([hidden]) .modal-bg {
  opacity: 1;
}
.modal:not([hidden]) .modal-card {
  transform: translate(-50%, -50%);
  opacity: 1;
}
.modal-loading::before {
  content: '로딩 중...';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--color-muted);
}
.modal-close {
  position: absolute;
  right: clamp(12px, 2.2vw, 20px);
  top: clamp(12px, 2.2vw, 20px);
  background: transparent;
  color: rgba(214, 236, 255, .78);
  border: none;
  padding: 0;
  width: auto;
  height: auto;
  font-size: clamp(20px, 3vw, 24px);
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: color var(--dur-short) var(--ease-standard), transform var(--dur-short) var(--ease-standard);
}
.modal-close:hover,
.modal-close:focus-visible {
  color: var(--color-primary);
  transform: scale(1.08);
  outline: none;
}

#immDetailModal .modal-close {
  position: absolute;
  top: 50%;
  right: clamp(-4px, -.6vw, -2px);
  transform: translateY(-50%);
  width: clamp(30px, 3.6vw, 38px);
  height: clamp(30px, 3.6vw, 38px);
  font-size: clamp(13px, 1.45vw, 15px);
  font-weight: 300;
  border-radius: 999px;
  border: 1px solid rgba(107, 209, 255, .24);
  background: rgba(6, 10, 16, .78);
  color: rgba(184, 198, 206, .86);
  backdrop-filter: blur(6px);
  box-shadow: 0 14px 32px rgba(0, 0, 0, .45);
  letter-spacing: .12em;
}
#immDetailModal .modal-close:hover,
#immDetailModal .modal-close:focus-visible {
  color: var(--color-primary);
  border-color: rgba(255, 0, 170, .35);
  background: rgba(12, 18, 26, .9);
  transform: translateY(-50%) scale(1.06);
}

#immModal .modal-card {
  padding: clamp(72px, 12vw, 120px) clamp(20px, 5vw, 36px) clamp(32px, 8vw, 60px) !important;
  max-height: min(92vh, 1080px);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: clamp(12px, 2vw, 24px);
}

#immModal .modal-card::-webkit-scrollbar {
  width: 8px;
}

#immModal .modal-card::-webkit-scrollbar-thumb {
  background: rgba(255, 0, 170, .35);
  border-radius: 999px;
}

#immModal .modal-card::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, .06);
}

#immModal .imm-controls,
#immModal .imm-tag-filters,
#immModal .imm-grid {
  flex: 0 0 auto;
}

#immModal .imm-grid {
  margin-top: clamp(16px, 3vw, 28px);
  padding-bottom: clamp(40px, 8vw, 80px);
}

/* Character modal */
.char-card { width: min(94vw, 1000px); padding: 12px; }
.char-legend {
  color: #d8f5e9; border: 1px solid #1e1e1e; background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.2));
  padding: 8px 10px; margin-bottom: 8px; line-height: 1.45; letter-spacing: .03em;
}
.char-legend .ko { opacity: .9; color: #bde8d7; }
.char-note { color: #cfcfcf; letter-spacing: .03em; text-align: center; margin: 8px 0 0; }
.char-bar { display: flex; align-items: center; justify-content: center; gap: 10px; margin: 6px 0 8px; }
.char-auto { background: transparent; color: var(--color-secondary); border: 1px solid var(--color-line); padding: 4px 8px; cursor: pointer; font-size: 12px; transition: color var(--dur-short) var(--ease-standard), border-color var(--dur-short) var(--ease-standard); }
.char-auto[aria-pressed="true"] { color: var(--color-primary); border-color: var(--color-primary); }
.char-strip { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 6px; max-height: 20vh; overflow: auto; }
.char-thumb { background: #0b0b0b; border: 1px solid var(--color-line); padding: 0; cursor: pointer; }
.char-thumb img { width: 140px; height: 90px; object-fit: cover; display: block; }
.char-thumb:hover { outline: 1px solid rgba(255, 0, 170, .35); filter: saturate(1.1); }

/* Immortals */
.imm-controls {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}
.imm-search {
  flex: 1 1 220px;
  position: relative;
}
.imm-search input {
  width: 100%;
  padding: 10px 14px;
  border: 1px solid var(--color-line);
  background: rgba(8, 8, 8, .85);
  color: var(--color-fg);
  font-size: 12px;
  letter-spacing: .08em;
  text-transform: uppercase;
  transition: border-color var(--dur-short) var(--ease-standard),
              box-shadow var(--dur-short) var(--ease-standard),
              background var(--dur-short) var(--ease-standard);
}
.imm-search input::placeholder {
  color: rgba(154, 160, 166, .8);
  letter-spacing: .08em;
}
.imm-search input:focus-visible {
  outline: none;
  border-color: rgba(0, 191, 255, .55);
  box-shadow: 0 0 0 2px rgba(0, 191, 255, .2);
  background: rgba(14, 16, 18, .95);
}
.imm-clear {
  appearance: none;
  border: 1px solid var(--color-line);
  background: transparent;
  color: var(--color-muted);
  letter-spacing: .12em;
  text-transform: uppercase;
  font-size: 10px;
  padding: 8px 12px;
  cursor: pointer;
  transition: color var(--dur-short) var(--ease-standard),
              border-color var(--dur-short) var(--ease-standard),
              box-shadow var(--dur-short) var(--ease-standard);
}
.imm-clear:hover,
.imm-clear:focus-visible {
  color: var(--color-secondary);
  border-color: rgba(0, 191, 255, .65);
  box-shadow: 0 0 12px rgba(0, 191, 255, .3);
  outline: none;
}
.imm-clear[hidden] { display: none; }
.imm-count {
  margin-left: auto;
  color: var(--color-muted);
  font-size: 11px;
  letter-spacing: .1em;
  text-transform: uppercase;
}
.imm-tag-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 14px;
}
.imm-tag-btn {
  appearance: none;
  border: 1px solid var(--color-line);
  background: rgba(8, 8, 8, .6);
  color: var(--color-muted);
  font-size: 10px;
  letter-spacing: .14em;
  text-transform: uppercase;
  padding: 6px 12px;
  cursor: pointer;
  transition: color var(--dur-short) var(--ease-standard),
              border-color var(--dur-short) var(--ease-standard),
              box-shadow var(--dur-short) var(--ease-standard),
              background var(--dur-short) var(--ease-standard);
}
.imm-tag-btn:hover,
.imm-tag-btn:focus-visible {
  color: var(--color-secondary);
  border-color: rgba(0, 191, 255, .6);
  box-shadow: 0 0 14px rgba(0, 191, 255, .35);
  outline: none;
}
.imm-tag-btn.is-active,
.imm-tag-btn[aria-pressed="true"] {
  color: var(--color-primary);
  border-color: rgba(255, 0, 170, .7);
  background: rgba(255, 0, 170, .12);
  box-shadow: 0 0 16px rgba(255, 0, 170, .32);
}
.imm-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 10px; }
.imm-empty {
  grid-column: 1 / -1;
  text-align: center;
  color: var(--color-muted);
  font-size: 12px;
  letter-spacing: .12em;
  text-transform: uppercase;
  padding: 24px 12px;
}
.imm-cell {
  position: relative;
  border: 1px solid var(--color-line);
  background: #0b0b0b;
  cursor: pointer;
  overflow: hidden;
  transition: transform var(--dur-short) var(--ease-standard), border-color var(--dur-short) var(--ease-standard);
  display: flex;
  flex-direction: column;
}
.imm-cell:hover { transform: translateY(-4px); border-color: rgba(255, 0, 170, .4); }
.imm-thumb {
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1;
  background: #000;
  overflow: hidden;
}
.imm-thumb-placeholder {
  position: absolute;
  inset: 0;
  background: radial-gradient(circle at 50% 40%, rgba(255, 0, 170, .18), rgba(0, 0, 0, .85));
}
.imm-thumb img,
.imm-thumb video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  filter: saturate(1.05);
}
.today-hero-card:hover,
.today-hero-card:focus-visible {
  transform: scale(1.02);
  border-color: rgba(255, 0, 170, .5);
  box-shadow: 0 24px 48px rgba(0, 0, 0, .45), 0 0 18px rgba(255, 0, 170, .28);
  outline: none;
}
.imm-cell strong,
.imm-cell span { pointer-events: none; }
.today-hero-card img,
.today-hero-card video { height: 100%; filter: saturate(1.05); }
.imm-cell .imm-info {
  position: absolute;
  inset: auto 0 0 0;
  padding: 8px 10px;
  background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.85));
  color: #e6fff5;
  font-size: 12px;
  letter-spacing: .04em;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.imm-cell .imm-info strong { font-size: 13px; font-weight: 600; }
.imm-cell .imm-info span { color: var(--color-secondary); text-transform: uppercase; font-size: 11px; }
.imm-meta-bar {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 8px;
  margin: 8px 0;
  padding: 6px 8px;
  border: 1px solid #1e1e1e;
  background: rgba(0,0,0,.35);
  color: #bde8d7;
  font-size: 12px;
  letter-spacing: .04em;
}
.imm-meta-bar[hidden] { display: none; }
.imm-tags { text-transform: uppercase; }
.imm-date { opacity: .8; }
.imm-legend { color: #bde8d7; font-size: 12px; letter-spacing: .03em; margin: 6px 0 0; opacity: .9; }
.imm-desc { color: #cfcfcf; line-height: 1.5; }
.imm-nav { display: flex; gap: 10px; align-items: center; justify-content: center; margin-top: 8px; }
.imm-index { color: var(--color-secondary); font-size: 12px; }

/* IMMORTALS POLISH PATCH */
#immDetailModal { position: fixed; inset: 0; z-index: 120; display: flex; align-items: center; justify-content: center; padding: clamp(24px, 6vh, 54px); overflow: auto; overscroll-behavior: contain; }
#immDetailModal .modal-bg { position: absolute; inset: 0; z-index: 0; }
#immDetailModal .modal-card {
  position: relative;
  z-index: 1;
  width: min(92vw, 980px) !important;
  padding: clamp(28px, 6vh, 54px) clamp(20px, 4vw, 42px) clamp(36px, 8vh, 72px) !important;
  background: rgba(8, 8, 12, .86);
  border: none;
  border-radius: 24px;
  box-shadow: 0 28px 70px rgba(0, 0, 0, .55);
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  justify-items: center;
  gap: clamp(20px, 5vh, 48px);
  overflow: visible !important;
  transform: none !important;
  transition: opacity var(--dur-medium) var(--ease-standard);
  left: auto;
  top: auto;
  margin: 0 auto;
}
#immDetailModal .modal-card > :not(.imm-detail-head) { width: 100%; max-width: clamp(280px, 62vw, 640px); }
#immDetailModal .imm-legend { display: none; }
#immDetailModal h3 {
  text-align: center;
  margin: 0;
  font-size: clamp(18px, 1.6vw, 22px);
  color: var(--color-imm-title) !important;
  font-weight: 300;
  letter-spacing: .32em;
  text-transform: uppercase;
  text-shadow: none;
}
#immDetailModal .imm-detail-head {
  position: relative;
  width: 100%;
  max-width: clamp(320px, 62vw, 640px);
  margin: 0 auto clamp(18px, 4vh, 32px);
  padding: clamp(8px, 1.6vh, 16px) clamp(48px, 8vw, 96px) clamp(18px, 3.4vh, 26px);
  display: flex;
  justify-content: center;
  align-items: center;
}
#immDetailModal .imm-detail-head::before {
  content: '';
  position: absolute;
  left: clamp(-14px, -2.2vw, -8px);
  right: clamp(-14px, -2.2vw, -8px);
  bottom: clamp(-4px, -.8vh, -2px);
  height: 1px;
  background: linear-gradient(90deg, rgba(107, 209, 255, .08) 0%, rgba(107, 209, 255, .42) 45%, rgba(107, 209, 255, .08) 100%);
  opacity: .9;
}
#immModal h3,
#immTitle {
  color: var(--color-imm-title);
  font-size: clamp(17px, 1.5vw, 21px);
  font-weight: 300;
  letter-spacing: .3em;
  text-transform: uppercase;
  text-shadow: none;
}
#immTitle {
  position: relative;
}
#immDetailModal .imm-hero {
  position: relative;
  width: clamp(280px, 62vw, 640px);
  aspect-ratio: 1 / 1;
  margin: clamp(18px, 5vh, 48px) auto 0;
  border-radius: 20px;
  overflow: hidden;
}
#immDetailModal #immVideo,
#immDetailModal #immVideoFallback {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: none !important;
  border-radius: 20px;
  background: #000;
  object-fit: contain !important;
  object-position: center center;
  outline: none;
  box-shadow: none;
}

#immDetailModal .imm-meta-bar,
#immDetailModal .imm-desc,
#immDetailModal .imm-nav { margin: 0 auto; text-align: center; }
#immDetailModal .imm-meta-bar {
  padding: clamp(4px, 1.2vh, 12px) 0 0;
  border: none;
  background: none;
  backdrop-filter: none;
  display: flex;
  justify-content: center;
  gap: clamp(10px, 2.4vw, 24px);
  flex-wrap: wrap;
}
#immDetailModal .imm-desc {
  font-size: clamp(15px, 1.2vw, 18px);
  line-height: 1.7;
  letter-spacing: .02em;
  color: #e4f6f0;
  text-shadow: 0 1px 1px rgba(0,0,0,.45);
}
#immDetailModal .imm-nav { margin-top: clamp(18px, 3vh, 36px); display: flex; gap: 10px; align-items: center; justify-content: center; }
#immDetailModal .imm-nav button {
  appearance: none;
  border: 1px solid rgba(116, 248, 255, .32);
  background: rgba(8, 10, 16, .78);
  color: var(--color-secondary);
  width: clamp(36px, 5vw, 46px);
  height: clamp(36px, 5vw, 46px);
  border-radius: 14px;
  display: grid;
  place-items: center;
  font-size: clamp(14px, 2vw, 18px);
  letter-spacing: .08em;
  transition: transform var(--dur-short) var(--ease-standard), border-color var(--dur-short) var(--ease-standard), color var(--dur-short) var(--ease-standard), box-shadow var(--dur-short) var(--ease-standard);
}
#immDetailModal .imm-nav button:hover,
#immDetailModal .imm-nav button:focus-visible {
  border-color: rgba(255, 0, 170, .55);
  color: var(--color-primary);
  box-shadow: 0 0 18px rgba(255, 0, 170, .28);
  transform: translateY(-2px);
  outline: none;
}
#immDetailModal .imm-index {
  font-size: clamp(12px, 1vw, 14px);
  letter-spacing: .16em;
  color: rgba(190, 248, 255, .85);
  text-transform: uppercase;
}
#immDetailModal .imm-legend {
  font-size: clamp(11px, .9vw, 13px);
  font-weight: 600;
  letter-spacing: .28em;
  text-transform: uppercase;
  color: rgba(116, 248, 255, .86);
  text-shadow: 0 0 12px rgba(0, 191, 255, .28);
}
#immDetailModal #immTitle {
  font-size: clamp(22px, 3.2vw, 34px);
  line-height: 1.08;
  letter-spacing: .05em;
  font-weight: 700;
  color: #f4fbff;
  text-shadow: 0 8px 24px rgba(0, 0, 0, .55);
}
#immDetailModal .imm-meta-bar {
  flex-wrap: nowrap;
  gap: clamp(12px, 3vw, 26px);
  font-size: clamp(12px, 1.1vw, 15px);
  letter-spacing: .14em;
  color: rgba(190, 248, 255, .82);
}
#immDetailModal .imm-tags {
  text-transform: uppercase;
  color: var(--color-secondary);
}
#immDetailModal .imm-date {
  color: rgba(255, 255, 255, .68);
}
#immDetailModal .imm-desc {
  max-width: clamp(320px, 60vw, 600px);
  margin-top: clamp(20px, 5vh, 48px);
  color: rgba(184, 198, 206, .82);
  font-weight: 300;
  letter-spacing: .12em;
  text-align: center;
  text-transform: none;
  text-shadow: none;
}
#immDetailModal .imm-desc-line {
  display: block;
  margin: clamp(0px, .6vh, 6px) auto;
  font-size: clamp(14px, 1.05vw, 16px);
  line-height: 1.8;
  text-transform: none;
}
#immDetailModal .imm-desc-line + .imm-desc-line {
  margin-top: clamp(10px, 1.8vh, 18px);
  opacity: .9;
}
#immDetailModal .imm-desc-line:last-child {
  opacity: .76;
}

/* Archive */
#archiveModal .modal-card {
  width: min(96vw, 1180px);
  max-height: min(92vh, 960px);
  padding: clamp(28px, 5vw, 48px);
  display: flex;
  flex-direction: column;
  gap: clamp(24px, 4vw, 40px);
  overflow-y: auto;
  overscroll-behavior: contain;
}

.archive-header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: clamp(12px, 3vw, 28px);
  padding-bottom: clamp(12px, 2vw, 18px);
  border-bottom: 1px solid rgba(255,255,255,.08);
}

.archive-title {
  margin: 0;
  font-size: clamp(20px, 2.6vw, 28px);
  letter-spacing: .2em;
  text-transform: uppercase;
}

.archive-subtitle {
  margin: 6px 0 0;
  font-size: clamp(12px, 1.6vw, 14px);
  letter-spacing: .08em;
  color: rgba(255,255,255,.55);
  max-width: 420px;
}

.archive-gallery {
  display: flex;
  flex-direction: column;
  gap: clamp(18px, 3vw, 28px);
  width: 100%;
}

.archive-wall {
  display: flex;
  flex-direction: column;
  gap: clamp(18px, 3vw, 28px);
  width: 100%;
}

.archive-grid {
  position: relative;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: clamp(20px, 3vw, 32px);
  width: 100%;
  overflow: hidden;
  contain: layout paint;
  --spotlight-x: 50%;
  --spotlight-y: 48%;
  --spotlight-radius: clamp(160px, 22vmin, 240px); /* Spotlight radius knob */
  --spotlight-feather: 0.22; /* Spotlight feather knob */
  --spotlight-intensity: 0; /* Spotlight intensity knob */
  --spotlight-secondary-intensity: 0;
  --spotlight-secondary-scale: 0.62;
  --spotlight-secondary-x: var(--spotlight-x);
  --spotlight-secondary-y: var(--spotlight-y);
  --spotlight-soft-edge: calc(var(--spotlight-radius) + (var(--spotlight-radius) * var(--spotlight-feather)));
  --spotlight-secondary-radius: calc(var(--spotlight-radius) * var(--spotlight-secondary-scale));
  --spotlight-secondary-soft-edge: calc(var(--spotlight-secondary-radius) + (var(--spotlight-secondary-radius) * var(--spotlight-feather)));
  --focus-scale: 1.2; /* Focus scale knob */
  --dim-scale: 0.9; /* Non-focus scale knob */
  --dim-saturate: 0.85; /* Non-focus saturation knob */
  --dim-blur: 1.5px;  /* Non-focus blur knob */
}

.archive-grid::before {
  content: '';
  position: absolute;
  inset: -12vh -20vw;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--dur-medium) var(--ease-smooth);
}

.archive-grid:not(.has-active) .cell:nth-child(-n+2) {
  grid-column: span 2;
  aspect-ratio: 5 / 4;
}

.archive-grid:not(.has-active) .cell:nth-child(7n) {
  grid-column: span 2;
  aspect-ratio: 1 / 1;
}

.archive-grid:not(.has-active) .cell:nth-child(11n) {
  grid-column: span 2;
  aspect-ratio: 16 / 9;
}

.archive-grid.archive-grid--spotlight::before {
  opacity: 1;
  background:
    radial-gradient(circle at var(--spotlight-x) var(--spotlight-y),
      rgba(210, 235, 255, var(--spotlight-intensity)) 0%,
      rgba(80, 170, 255, calc(var(--spotlight-intensity) * 0.5)) var(--spotlight-radius),
      rgba(0, 0, 0, .82) var(--spotlight-soft-edge)),
    radial-gradient(circle at var(--spotlight-secondary-x) var(--spotlight-secondary-y),
      rgba(160, 220, 255, var(--spotlight-secondary-intensity)) 0%,
      rgba(0, 0, 0, .78) var(--spotlight-secondary-soft-edge)),
    linear-gradient(140deg, rgba(4,6,12,.9), rgba(2,2,6,.94));
  mix-blend-mode: screen;
}

.archive-grid-state {
  grid-column: 1 / -1;
  display: grid;
  place-items: center;
  min-height: clamp(176px, 34vw, 320px);
  padding: clamp(24px, 4.2vw, 40px);
  border-radius: 26px;
  border: 1px solid rgba(120, 200, 255, .38);
  background:
    radial-gradient(160% 210% at 30% 20%, rgba(30, 88, 200, .4), transparent 68%),
    linear-gradient(140deg, rgba(6, 12, 24, .94), rgba(4, 2, 16, .96));
  color: rgba(189, 232, 215, .9);
  letter-spacing: .28em;
  text-transform: uppercase;
  font-size: 11px;
  text-align: center;
  box-shadow: 0 46px 90px rgba(0,0,0,.5);
}

.archive-grid-state--error {
  border-color: rgba(255, 120, 150, .42);
  color: rgba(255, 180, 204, .94);
  background:
    radial-gradient(160% 200% at 22% 16%, rgba(180, 20, 70, .4), transparent 72%),
    linear-gradient(150deg, rgba(32, 6, 14, .92), rgba(4, 0, 8, .94));
}

.archive-grid-state--empty {
  border-color: rgba(255,255,255,.18);
  color: rgba(255,255,255,.6);
}

.archive-grid .cell {
  --archive-accent: rgba(255, 255, 255, .25);
  --archive-accent-soft: rgba(255, 255, 255, .16);
  --archive-accent-shadow: rgba(0, 0, 0, .72);
  position: relative;
  display: block;
  aspect-ratio: 3 / 4;
  border-radius: clamp(20px, 4vw, 26px);
  border: 1px solid var(--archive-accent-soft);
  overflow: hidden;
  cursor: pointer;
  background: linear-gradient(178deg, rgba(6, 10, 18, .94), rgba(2, 2, 6, .88));
  box-shadow:
    0 26px 64px rgba(0,0,0,.58), /* Glow strength knob: adjust blur radius 64px for softer/harder aura */
    0 0 0 1px rgba(255,255,255,.05);
  will-change: transform, filter, opacity;
  transition:
    transform var(--dur-short) var(--ease-smooth),
    border-color var(--dur-short) var(--ease-smooth),
    box-shadow var(--dur-short) var(--ease-smooth),
    opacity var(--dur-short) linear;
}

.archive-grid .cell::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background:
    radial-gradient(140% 190% at 32% 18%, color-mix(in srgb, var(--archive-accent) 55%, transparent) 0%, transparent 70%),
    linear-gradient(182deg, rgba(0, 0, 0, .0) 20%, rgba(0, 0, 0, .75) 100%);
  opacity: .65;
  transition: opacity var(--dur-short) var(--ease-standard);
}

.archive-grid .cell::after {
  content: '';
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  border: 1px solid color-mix(in srgb, var(--archive-accent) 42%, transparent);
  filter: blur(0);
  opacity: .35;
  transition:
    opacity var(--dur-short) var(--ease-standard),
    border-color var(--dur-short) var(--ease-standard);
}

.archive-grid:not(.is-focused) .cell:hover {
  transform: translateY(-16px) scale(1.035);
  border-color: var(--archive-accent);
  box-shadow:
    0 42px 90px rgba(0,0,0,.62), /* Glow spread knob: tune 90px blur + 84px in spotlight block below */
    0 0 0 1px color-mix(in srgb, var(--archive-accent) 72%, transparent),
    0 0 64px color-mix(in srgb, var(--archive-accent) 42%, transparent);
}

.archive-grid:not(.is-focused) .cell:hover::before {
  opacity: .32;
}

.archive-grid:not(.is-focused) .cell:hover::after {
  opacity: .45;
  border-color: color-mix(in srgb, var(--archive-accent) 78%, transparent);
}

.archive-grid .cell.is-active {
  border-color: var(--archive-accent);
  box-shadow:
    0 46px 96px rgba(0,0,0,.66),
    0 0 0 1px color-mix(in srgb, var(--archive-accent) 82%, transparent),
    0 0 76px color-mix(in srgb, var(--archive-accent) 50%, transparent);
}

.archive-grid.has-active .cell {
  grid-column: span 1;
}

.archive-grid.has-active .cell.is-focus {
  grid-column: 1 / -1;
  min-height: clamp(72vh, 82vh, 90vh);
  padding: clamp(18px, 3vw, 28px);
  background: linear-gradient(175deg, rgba(4,6,12,.92), rgba(6,8,16,.96));
}

.archive-grid .cell .archive-media {
  position: absolute;
  inset: 0;
  border-radius: inherit;
  overflow: hidden;
  background: rgba(8, 10, 16, .9);
  --scrub-progress: 0;
}

.archive-grid .cell .archive-media img,
.archive-grid .cell .archive-media video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transform-origin: center;
  transition: transform var(--dur-medium) var(--ease-smooth);
}

.archive-grid:not(.is-focused) .cell:hover .archive-media img,
.archive-grid:not(.is-focused) .cell:hover .archive-media video {
  transform: scale(1.08);
}

.archive-grid.has-selection .cell:not(.is-active):hover .archive-media img,
.archive-grid.has-selection .cell:not(.is-active):hover .archive-media video {
  transform: none;
}

.archive-grid .cell .archive-media video {
  background: #000;
  filter: saturate(1.18) contrast(1.02);
}

.archive-grid.has-active .cell.is-focus .archive-media {
  position: relative;
  inset: auto;
  border-radius: clamp(16px, 3vw, 24px);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: auto;
  min-height: clamp(52vh, 66vh, 78vh);
}

.archive-grid.has-active .cell.is-focus .archive-media img,
.archive-grid.has-active .cell.is-focus .archive-media video {
  object-fit: contain;
  width: auto;
  max-width: min(100%, 1200px);
  max-height: clamp(72vh, 82vh, 90vh);
}

.archive-grid .cell .archive-media[data-scrub='1']::before {
  content: 'SCRUB TO PREVIEW';
  position: absolute;
  inset: auto clamp(10px, 2vw, 16px) clamp(14px, 2.6vw, 20px) clamp(10px, 2vw, 16px);
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 10px;
  letter-spacing: .3em;
  text-transform: uppercase;
  color: color-mix(in srgb, var(--archive-accent) 70%, white 10%);
  background: rgba(0,0,0,.58);
  border: 1px solid color-mix(in srgb, var(--archive-accent) 60%, transparent);
  box-shadow: 0 12px 30px rgba(0,0,0,.45);
  opacity: .0;
  transition: opacity 160ms var(--ease-standard);
}

.archive-grid .cell:hover .archive-media[data-scrub='1']::before,
.archive-grid .cell:focus-within .archive-media[data-scrub='1']::before {
  opacity: .9;
}

.archive-grid.has-selection .cell:not(.is-active) .archive-media {
  transform: scale(var(--dim-scale));
}

.archive-grid.has-selection .cell:not(.is-active) .archive-media img,
.archive-grid.has-selection .cell:not(.is-active) .archive-media video {
  filter: saturate(var(--dim-saturate)) blur(var(--dim-blur));
}

.archive-grid.has-selection .cell.is-active .archive-media {
  transform: scale(var(--focus-scale));
  box-shadow: 0 26px 60px rgba(255, 0, 170, .22);
}

.archive-grid.has-selection .cell.is-active .archive-media img,
.archive-grid.has-selection .cell.is-active .archive-media video {
  filter: saturate(1.05);
}

.archive-grid .cell .caption {
  position: absolute;
  inset-inline: clamp(12px, 3vw, 22px);
  inset-block-end: clamp(12px, 3vw, 22px);
  margin: 0;
  padding: clamp(10px, 2.4vw, 18px) clamp(14px, 3.2vw, 24px);
  font-size: 12px;
  letter-spacing: .22em;
  text-transform: uppercase;
  color: rgba(255,255,255,.88);
  backdrop-filter: blur(10px);
  border-radius: clamp(12px, 2.4vw, 18px);
  background: linear-gradient(150deg, rgba(0,0,0,.8), rgba(0,0,0,.4));
  border: 1px solid color-mix(in srgb, var(--archive-accent) 48%, rgba(255,255,255,.18));
  z-index: 2;
  display: inline-flex;
  align-items: center;
  gap: clamp(6px, 2vw, 12px);
  box-shadow: 0 18px 40px rgba(0,0,0,.45);
}

.archive-grid .cell .caption-title {
  font-size: clamp(13px, 2vw, 16px);
  font-weight: 600;
}

.archive-grid .cell .caption-type {
  display: inline-block;
  margin-top: clamp(6px, 1.4vw, 10px);
  font-size: 10px;
  letter-spacing: .48em;
  color: color-mix(in srgb, var(--archive-accent) 75%, rgba(200,220,255,.6));
}

.archive-grid.has-active .cell.is-focus .caption {
  position: static;
  margin-top: clamp(16px, 3vw, 28px);
  padding: clamp(18px, 3vw, 26px) clamp(18px, 3.4vw, 32px);
  background: linear-gradient(155deg, rgba(0,0,0,.78), rgba(0,0,0,.42));
  border: 1px solid color-mix(in srgb, var(--archive-accent) 60%, rgba(255,255,255,.18));
  box-shadow: 0 30px 60px rgba(0,0,0,.45);
  text-align: center;
}

.archive-grid.has-active .cell.is-dim .caption {
  opacity: .2;
}

.archive-grid .cell .archive-media::after {
  content: '';
  position: absolute;
  inset-inline: 0;
  inset-block-end: 0;
  height: 3px;
  background: color-mix(in srgb, var(--archive-accent) 85%, rgba(255,255,255,.05));
  transform: scaleX(var(--scrub-progress));
  transform-origin: left center;
  transition: transform 120ms var(--ease-standard);
}

.archive-grid.archive-grid--spotlight .cell {
  opacity: .4;
  filter: saturate(.8);
}

.archive-grid.archive-grid--spotlight .cell:hover,
.archive-grid.archive-grid--spotlight .cell:focus-within {
  opacity: 1;
  filter: none;
  transform: translateY(-20px) scale(1.06);
  box-shadow:
    0 48px 118px rgba(0,0,0,.68),
    0 0 0 1px color-mix(in srgb, var(--archive-accent) 88%, transparent),
    0 0 84px color-mix(in srgb, var(--archive-accent) 52%, transparent);
}

.archive-grid.is-focused.archive-grid--spotlight .cell.is-focus:hover,
.archive-grid.is-focused.archive-grid--spotlight .cell.is-focus:focus-within {
  transform: translateY(-22px) scale(var(--focus-scale));
}

.archive-grid.is-focused .cell {
  transition:
    transform var(--dur-medium) var(--ease-smooth),
    filter var(--dur-medium) var(--ease-smooth),
    opacity var(--dur-medium) linear,
    box-shadow var(--dur-medium) var(--ease-smooth);
}

.archive-grid.is-focused .cell.is-focus {
  z-index: 6;
  transform: translateY(-22px) scale(var(--focus-scale));
  opacity: 1;
  filter: none;
  pointer-events: auto;
  box-shadow:
    0 56px 124px rgba(0,0,0,.7),
    0 0 0 1px color-mix(in srgb, var(--archive-accent) 88%, transparent),
    0 0 96px color-mix(in srgb, var(--archive-accent) 58%, transparent);
}

.archive-grid.is-focused .cell.is-focus::before {
  opacity: .18;
}

.archive-grid.is-focused .cell.is-focus::after {
  opacity: .5;
  border-color: color-mix(in srgb, var(--archive-accent) 92%, transparent);
}

.archive-grid.is-focused .cell.is-dim {
  transform: translateY(6px) scale(var(--dim-scale));
  filter: saturate(var(--dim-saturate)) blur(var(--dim-blur));
  opacity: .85;
}

.archive-grid.is-focused .cell.is-dim::before {
  opacity: .12;
}

.archive-grid.is-focused .cell.is-dim::after {
  opacity: .2;
}

.archive-grid.is-animating {
  transition: opacity 280ms var(--ease-smooth);
}

.archive-grid.is-animating::before {
  opacity: .32;
  filter: blur(18px);
}

.archive-grid.is-animating .cell {
  will-change: transform, opacity;
  transition: transform 380ms cubic-bezier(.2,.7,.2,1),
              filter 320ms cubic-bezier(.2,.7,.2,1),
              opacity 320ms cubic-bezier(.2,.7,.2,1),
              box-shadow 320ms cubic-bezier(.2,.7,.2,1);
}

.archive-grid.is-animating .cell::before {
  opacity: .24;
}

.archive-grid.is-animating .cell::after {
  opacity: .16;
}

.archive-grid.is-animating .cell .archive-media[data-scrub='1']::before {
  opacity: 0 !important;
}

.archive-media--contain img,
.archive-media--contain video {
  object-fit: contain;
  background: #000;
}

@media (prefers-reduced-motion: reduce) {
  .archive-grid .cell,
  .archive-grid .cell .archive-media img,
  .archive-grid .cell .archive-media video {
    transition: none !important;
  }

  .archive-grid.has-active .cell.is-focus {
    transform: translateY(-12px) scale(1.05);
  }

  .archive-grid.has-active .cell.is-dim {
    transform: scale(.96);
    filter: saturate(.92);
    opacity: .78;
  }
}

@media (max-width: 960px) {
  .archive-grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: clamp(18px, 4vw, 28px);
  }

  .archive-grid:not(.has-active) .cell,
  .archive-grid:not(.has-active) .cell:nth-child(7n),
  .archive-grid:not(.has-active) .cell:nth-child(11n),
  .archive-grid:not(.has-active) .cell:nth-child(-n+2) {
    grid-column: span 1;
    aspect-ratio: 3 / 4;
  }
}

@media (max-width: 720px) {
  .archive-grid {
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }

  .archive-grid.has-active .cell.is-focus {
    min-height: clamp(66vh, 78vh, 82vh);
  }
}

@media (hover: none) {
  .archive-grid.has-active .cell.is-dim {
    transform: scale(.98);
    filter: saturate(.94);
    opacity: .86;
  }
}

.archive-modal-card { position: relative; }

.archive-detail,
.archive-detail * {
  display: none !important;
}

.archive-detail {
  position: absolute;
  inset: clamp(18px, 4vw, 48px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: clamp(20px, 3.2vw, 28px);
  pointer-events: none;
  opacity: 0;
  transform: translateY(24px) scale(.96);
  transition: opacity var(--dur-medium) var(--ease-smooth),
              transform var(--dur-medium) var(--ease-smooth);
  z-index: 40;
  border-radius: clamp(20px, 4vw, 32px);
  background:
    radial-gradient(160% 200% at 18% 12%, rgba(48, 96, 180, .25), transparent 70%),
    linear-gradient(135deg, rgba(4, 6, 12, .94), rgba(2, 2, 6, .96));
  box-shadow: 0 48px 110px rgba(0,0,0,.65);
}

.archive-detail::before {
  content: '';
  position: absolute;
  inset: clamp(12px, 2.8vw, 24px);
  border-radius: inherit;
  border: 1px solid rgba(120, 200, 255, .22);
  pointer-events: none;
  opacity: .6;
}

.archive-detail.has-selection {
  pointer-events: auto;
  opacity: 1;
  transform: translateY(0) scale(1);
}

.archive-detail-guide {
  display: grid;
  place-items: center;
  min-height: clamp(220px, 32vw, 320px);
  border-radius: 18px;
  border: 1px dashed rgba(255,255,255,.18);
  background: rgba(12,12,12,.48);
  color: rgba(255,255,255,.44);
  letter-spacing: .2em;
  text-transform: uppercase;
  font-size: 11px;
}

.archive-detail-guide[hidden] {
  display: none;
}

.archive-detail-media {
  position: relative;
  display: grid;
  place-items: center;
  padding: clamp(24px, 5vw, 48px);
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(150deg, rgba(18,18,18,.94), rgba(8,8,8,.88));
  min-height: clamp(320px, 58vh, 90vh);
  max-height: min(90vh, 980px);
  overflow: hidden;
  box-shadow: 0 24px 56px rgba(0,0,0,.5);
  opacity: 0;
  transform: translateY(16px);
  transition: opacity var(--dur-medium) var(--ease-standard),
              transform var(--dur-medium) var(--ease-standard);
}

.archive-detail-media[hidden] {
  display: none;
}

.archive-detail-media.is-ready {
  opacity: 1;
  transform: translateY(0);
}

.archive-detail-media .archive-media {
  width: 100%;
  height: 100%;
  display: grid;
  place-items: center;
}

.archive-detail-media .archive-media img,
.archive-detail-media .archive-media video {
  max-width: 100%;
  max-height: min(calc(90vh - clamp(48px, 10vw, 120px)), 820px);
  object-fit: contain;
  border-radius: 12px;
  box-shadow: 0 28px 64px rgba(0,0,0,.56);
}

.archive-detail-media .archive-media video {
  background: #000;
}

.archive-detail-caption {
  position: relative;
  margin: 0;
  padding-left: 18px;
  font-size: 12px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: rgba(255,255,255,.6);
}

.archive-detail-caption::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255, 0, 170, .4);
  transform: translateY(-50%);
}

.archive-detail-caption[hidden] {
  display: none;
}

@media (max-width: 1024px) {
  .archive-detail {
    position: static;
    inset: auto;
    border-radius: 0;
    background: none;
    box-shadow: none;
    opacity: 1;
    transform: none;
    pointer-events: auto;
    gap: clamp(18px, 4vw, 24px);
  }

  .archive-detail::before {
    display: none;
  }

  .archive-detail:not(.has-selection) {
    display: none;
    visibility: hidden;
  }

  .archive-detail-media {
    min-height: clamp(280px, 72vh, 78vh);
    max-height: 78vh;
  }

  .archive-gallery {
    grid-template-columns: 1fr;
    gap: clamp(20px, 4vw, 36px);
  }

  .archive-wall {
    padding-right: 0;
    border-right: 0;
    border-bottom: 1px solid rgba(255,255,255,.08);
    padding-bottom: clamp(18px, 3vw, 28px);
  }
}

#charModal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  z-index: 1000; /* 포털 위로 표시 */
  display: none; /* hidden 속성 반영 */
}
#charModal[hidden] {
  display: none;
}
.intro-clip[hidden] {
  display: none !important;
}
.modal-open .stage,
.modal-open .egg {
  filter: blur(4px) saturate(.85);
  pointer-events: none;
}
.archive-grid.is-focused .cell.is-focus .archive-media img,
.archive-grid.is-focused .cell.is-focus .archive-media video {
  transform: scale(1.02);
}

.archive-grid.is-focused .cell.is-dim .archive-media img,
.archive-grid.is-focused .cell.is-dim .archive-media video {
  transform: scale(1);
}
.archive-grid.has-active .cell.is-dim {
  transform: translateY(4px) scale(var(--dim-scale));
  filter: saturate(var(--dim-saturate)) blur(var(--dim-blur));
  opacity: .6;
  pointer-events: none;
}
#immDetailModal:not([hidden]) .modal-card {
  transform: none !important;
  left: auto;
  top: auto;
}
